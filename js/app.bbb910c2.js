(function(e){function t(t){for(var s,i,n=t[0],l=t[1],c=t[2],u=0,m=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},o={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav-bar"),a("div",{staticClass:"container-fluid"},[a("transition",[a("router-view")],1),a("error")],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/movies"}},[e._v("Movies")]),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarContent"}},[a("ul",{staticClass:"navbar-nav ml-auto"},[e.auth?e._e():a("router-link",{staticClass:"nav-item",attrs:{to:"/register","active-class":"active",tag:"li"}},[a("a",{staticClass:"nav-link"},[e._v(" Register "),a("font-awesome-icon",{attrs:{icon:"user-plus"}})],1)]),e.auth?e._e():a("router-link",{staticClass:"nav-item",attrs:{to:"/login","active-class":"active",tag:"li"}},[a("a",{staticClass:"nav-link"},[e._v(" Login "),a("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1)]),e.auth?a("li",{staticClass:"nav-item"},[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"submit"},on:{click:e.onLogout}},[e._v(" Logout "),a("font-awesome-icon",{attrs:{icon:"power-off"}})],1)]):e._e()],1)])],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarContent","aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],l={name:"NavBar",computed:{auth:function(){return this.$store.getters["auth/isAuthenticated"]}},methods:{onLogout:function(){this.$store.dispatch("auth/logout")}}},c=l,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"5169d6e4",null),m=u.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 offset-3"},[a("transition",{attrs:{"enter-active-class":"animated bounce","leave-active-class":"animated fadeOut",mode:"out-in"}},[this.$store.state.errors.error?a("div",{staticClass:"alert alert-danger mt-5",attrs:{role:"alert"}},[e._v(" "+e._s(this.$store.state.errors.errorMessage)+" ")]):e._e()])],1)])},p=[],f={name:"Error"},h=f,g=Object(d["a"])(h,v,p,!1,null,"33f42e59",null),b=g.exports,w={name:"App",components:{"nav-bar":m,Error:b},created:function(){this.$store.dispatch("auth/tryAutoLogin")}},_=w,C=Object(d["a"])(_,o,r,!1,null,null,null),$=C.exports,k=a("9483");Object(k["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var y=a("8c4f"),I=a("2f62"),S=(a("b0c0"),a("ac1f"),a("5319"),a("bc3a")),x=a.n(S),E=x.a.create({baseURL:"https://identitytoolkit.googleapis.com/v1"}),O=E,P={namespaced:!0,state:{name:null,idToken:null,userId:null},mutations:{authUser:function(e,t){e.name=t.name,e.idToken=t.token,e.userId=t.userId},clearAuthData:function(e){e.name=null,e.idToken=null,e.userId=null}},actions:{setLogoutTimer:function(e,t){e.commit;var a=e.dispatch;setTimeout((function(){a("logout")}),1e3*t)},logIn:function(e,t){var a=e.commit,s=e.dispatch;e.rootState;O.post("accounts:signInWithPassword?key=AIzaSyCLTMZwpHukotloBhAQIqR0EHOx6a8Si1c",{email:t.email,password:t.password,returnSecureToken:!0}).then((function(e){var t=new Date,o=new Date(t.getTime()+1e3*e.data.expiresIn);localStorage.setItem("name",e.data.displayName),localStorage.setItem("token",e.data.idToken),localStorage.setItem("userId",e.data.localId),localStorage.setItem("expirationDate",o),a("authUser",{name:e.data.displayName,token:e.data.idToken,userId:e.data.localId}),s("setLogoutTimer",e.data.expiresIn),Ce.replace("/movies")})).catch((function(e){var t=null;400===e.response.status&&(t="Credentials indicated are invalid. Please check it."),s("errors/showError",t,{root:!0})}))},register:function(e,t){var a=e.commit,s=e.dispatch;O.post("accounts:signUp?key=AIzaSyCLTMZwpHukotloBhAQIqR0EHOx6a8Si1c",{displayName:t.name,email:t.email,password:t.password,returnSecureToken:!0}).then((function(e){a("authUser",{name:e.data.displayName,token:e.data.idToken,userId:e.data.localId});var t=new Date,o=new Date(t.getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("name",e.data.displayName),localStorage.setItem("userId",e.data.localId),localStorage.setItem("expirationDate",o),s("setLogoutTimer",e.data.expiresIn),Ce.replace("/movies")})).catch((function(){s("errors/showError","Cannot register at moment, please try again later.",{root:!0})}))},tryAutoLogin:function(e){var t=e.commit,a=e.dispatch,s=localStorage.getItem("token");if(s){var o=new Date(localStorage.getItem("expirationDate")),r=new Date;if(r>=o)a("logout");else{var i=localStorage.getItem("userId"),n=localStorage.getItem("name");t("authUser",{name:n,token:s,userId:i}),Ce.replace("/movies")}}},logout:function(e){var t=e.commit;t("clearAuthData"),localStorage.removeItem("expirationDate"),localStorage.removeItem("name"),localStorage.removeItem("token"),localStorage.removeItem("userId"),Ce.replace("/login")}},modules:{},getters:{user:function(e){return e.name},isAuthenticated:function(e){return null!==e.idToken}}},T=x.a.create({baseURL:"https://compare-spa-apps.firebaseio.com/",headers:{Accepts:"application/json"}}),L=T,j={namespaced:!0,state:{movies:[]},actions:{initMovies:function(e){var t=e.commit,a=(e.state,e.rootState),s=e.dispatch;a.auth.idToken&&L.get("movies.json?auth="+a.auth.idToken+'&orderBy="owner"&equalTo="'+a.auth.userId+'"').then((function(e){var a=[],s=e.data;for(var o in s){var r={id:o,title:s[o].title,owner:s[o].owner};a.push(r)}t("SET_MOVIES",a)})).catch((function(){s("errors/showError","Cannot get movies",{root:!0})}))},createMovie:function(e,t){e.commit;var a=e.dispatch,s=e.rootState;L.post("movies.json?auth="+s.auth.idToken,{title:t.title,owner:s.auth.userId}).then((function(e){a("initMovies"),Ce.replace("/movies")})).catch((function(){a("errors/showError","Cannot create the movie",{root:!0})}))},deleteMovie:function(e,t){e.commit;var a=e.dispatch,s=e.rootState;L.delete("movies/"+t.id+".json?auth="+s.auth.idToken).then((function(e){a("initMovies")})).catch((function(){a("errors/showError","Cannot delete the movie",{root:!0})}))}},mutations:{SET_MOVIES:function(e,t){e.movies=t}},getters:{movies:function(e){return e.movies}}},A={namespaced:!0,state:{error:!1,errorMessage:""},actions:{showError:function(e,t){var a=e.commit,s=e.dispatch;a("SHOW_ERROR",t),setTimeout((function(){s("hideError")}),5e3)},hideError:function(e){var t=e.commit;t("RESET_ERROR")}},mutations:{SHOW_ERROR:function(e,t){e.error=!0,null===t&&(t="Oops, something go wrong."),e.errorMessage=t},RESET_ERROR:function(e){e.error=!1,e.errorMessage=""}},getters:{}};s["a"].use(I["a"]);var q=new I["a"].Store({modules:{auth:P,movies:j,errors:A}}),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h1",{staticClass:"text-center col-6 offset-3 mt-3"},[e._v(" Welcome "+e._s(this.$store.state.auth.name)+"! ")]),a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row"},e._l(e.movies,(function(e){return a("movie",{key:e.id,attrs:{movie:e}})})),1)]),a("div",{staticClass:"col-6 offset-3 mt-3"},[a("router-link",{staticClass:"btn btn-success btn-block",attrs:{to:"/movies/create"}},[e._v(" Add movie "),a("font-awesome-icon",{attrs:{icon:"plus"}})],1)],1)])},R=[],N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-6 col-sm-4 col-lg-3 col-xl-2"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"text-center"},[e._v(e._s(e.movie.title))])]),a("div",{staticClass:"card-footer text-center"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:e.deleteMovie}},[a("font-awesome-icon",{attrs:{icon:"trash"}})],1)])])])},D=[],H={name:"Movie",props:{movie:{type:Object,required:!0}},methods:{deleteMovie:function(){var e=this;this.$swal.fire({text:"Have you already seen the movie?",icon:"info",showCancelButton:!0}).then((function(t){t.value&&e.$store.dispatch("movies/deleteMovie",e.movie)}))}}},U=H,B=Object(d["a"])(U,N,D,!1,null,"42047956",null),W=B.exports,z={name:"Index",components:{movie:W},created:function(){this.$store.dispatch("movies/initMovies")},computed:{movies:function(){return this.$store.getters["movies/movies"]}},methods:{}},F=z,J=Object(d["a"])(F,M,R,!1,null,null,null),Q=J.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-6 offset-3 pt-5"},[a("div",{staticClass:"card"},[a("h5",{staticClass:"card-header"},[e._v(" Please provide your data to log in. ")]),a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[e._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",class:{"is-invalid":e.$v.email.$invalid},attrs:{type:"email",id:"email"},domProps:{value:e.email},on:{blur:function(t){return e.$v.email.$touch()},input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.$v.email.required&&e.$v.email.email?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Please, indicated a valid email address. ")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":e.$v.password.$invalid},attrs:{type:"password",id:"password","aria-describedby":"password-help"},domProps:{value:e.password},on:{blur:function(t){return e.$v.password.$touch()},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.$v.password.required&&e.$v.password.minLen?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Password must be have at least "+e._s(e.$v.password.$params.minLen.min)+" characters length. ")])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.$v.$invalid}},[e._v(" Log In "),a("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1)])])])])},Y=[],Z=a("b5ae"),G={name:"Login",data:function(){return{email:"",password:""}},validations:{email:{required:Z["required"],email:Z["email"]},password:{required:Z["required"],minLen:Object(Z["minLength"])(6)}},methods:{onSubmit:function(){var e={email:this.email,password:this.password};this.$store.dispatch("auth/logIn",e)}}},K=G,X=Object(d["a"])(K,V,Y,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"card mt-5"},[a("h5",{staticClass:"card-header"},[e._v(" Please provide your data to register. ")]),a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[e._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",class:{"is-invalid":e.$v.name.$invalid},attrs:{type:"text",id:"name"},domProps:{value:e.name},on:{blur:function(t){return e.$v.name.$touch()},input:function(t){t.target.composing||(e.name=t.target.value)}}}),e.$v.name.required&&e.$v.name.minLen?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Name must be required and at least "+e._s(e.$v.name.$params.minLen.min)+" characters. ")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[e._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",class:{"is-invalid":e.$v.email.$invalid},attrs:{type:"email",id:"email"},domProps:{value:e.email},on:{blur:function(t){return e.$v.email.$touch()},input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.$v.email.required&&e.$v.email.email?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Please, indicated a valid email address. ")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":e.$v.password.$invalid},attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{blur:function(t){return e.$v.password.$touch()},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.$v.password.required&&e.$v.password.minLen?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Password must be have at least "+e._s(e.$v.password.$params.minLen.min)+" characters length. ")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"confirm-password"}},[e._v("Confirm Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",class:{"is-invalid":e.$v.confirmPassword.$invalid},attrs:{type:"password",id:"confirm-password"},domProps:{value:e.confirmPassword},on:{blur:function(t){return e.$v.confirmPassword.$touch()},input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}}),e.$v.confirmPassword.required&&e.$v.confirmPassword.sameAs?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Confirm password must be equals than "+e._s(e.$v.confirmPassword.$params.sameAs.eq)+" field. ")])]),a("div",{staticClass:"form-group form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.check,expression:"check"}],staticClass:"form-check-input",class:{"is-invalid":e.$v.check.$invalid},attrs:{type:"checkbox",id:"check"},domProps:{checked:Array.isArray(e.check)?e._i(e.check,null)>-1:e.check},on:{change:function(t){var a=e.check,s=t.target,o=!!s.checked;if(Array.isArray(a)){var r=null,i=e._i(a,r);s.checked?i<0&&(e.check=a.concat([r])):i>-1&&(e.check=a.slice(0,i).concat(a.slice(i+1)))}else e.check=o}}}),a("label",{staticClass:"form-check-label",attrs:{for:"check"}},[e._v("Accept Terms & Conditions")]),e.$v.check.sameAs?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" You must agree before submitting ")])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.$v.$invalid}},[e._v(" Register "),a("font-awesome-icon",{attrs:{icon:"user-plus"}})],1)])])])])},ae=[],se={name:"Register",data:function(){return{name:"",email:"",password:"",confirmPassword:"",check:!1}},validations:{name:{required:Z["required"],minLen:Object(Z["minLength"])(6)},email:{required:Z["required"],email:Z["email"]},password:{required:Z["required"],minLen:Object(Z["minLength"])(6)},confirmPassword:{sameAs:Object(Z["sameAs"])("password")},check:{sameAs:Object(Z["sameAs"])((function(){return!0}))}},methods:{onSubmit:function(){var e={name:this.name,email:this.email,password:this.password,confirmPassword:this.confirmPassword,terms:this.terms};this.$store.dispatch("auth/register",e)}}},oe=se,re=Object(d["a"])(oe,te,ae,!1,null,null,null),ie=re.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"card mt-5"},[a("h5",{staticClass:"card-header"},[e._v(" Adding movie... ")]),a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[e._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",class:{"is-invalid":e.$v.title.$invalid},attrs:{type:"text",id:"title"},domProps:{value:e.title},on:{blur:function(t){return e.$v.title.$touch()},input:function(t){t.target.composing||(e.title=t.target.value)}}}),e.$v.title.required&&e.$v.title.minLen?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(" Title must be required and at least "+e._s(e.$v.title.$params.minLen.min)+" characters. ")])]),a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:e.$v.$invalid}},[e._v(" Add "),a("font-awesome-icon",{attrs:{icon:"plus"}})],1)])])])])},le=[],ce={name:"Create",data:function(){return{title:""}},validations:{title:{required:Z["required"],minLen:Object(Z["minLength"])(3)}},methods:{onSubmit:function(){var e={title:this.title};this.$store.dispatch("movies/createMovie",e)}}},de=ce,ue=Object(d["a"])(de,ne,le,!1,null,null,null),me=ue.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"col-6 offset-3 text-center"},[a("router-link",{staticClass:"btn btn-info",attrs:{to:"/movies"}},[a("font-awesome-icon",{attrs:{icon:"undo",size:"6x"}})],1)],1)])},pe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-6 offset-3"},[a("h1",[e._v("Oops!")]),a("h2",[e._v("You got lost on the way (Error 404)")]),a("small",[e._v("Let me help you")])])}],fe={name:"Error404"},he=fe,ge=Object(d["a"])(he,ve,pe,!1,null,"47463ac4",null),be=ge.exports;s["a"].use(y["a"]);var we=[{path:"",name:"Home",redirect:"/movies"},{path:"/movies",name:"Movies",component:Q,beforeEnter:function(e,t,a){q.state.auth.idToken?a():a("/login")}},{path:"/login",name:"Login",component:ee},{path:"/register",name:"Register",component:ie},{path:"/movies/create",name:"CreateMovie",component:me},{path:"*",component:be}],_e=new y["a"]({mode:"history",base:"/",routes:we}),Ce=_e,$e=a("1dce"),ke=a.n($e),ye=(a("1157"),a("4989"),a("ab8b"),a("4b3c"),a("5886")),Ie=(a("4413"),a("ecee")),Se=a("c074"),xe=a("ad3d");Ie["c"].add(Se["a"]),s["a"].component("font-awesome-icon",xe["a"]),s["a"].use(ke.a),s["a"].use(ye["a"]),s["a"].config.productionTip=!1,new s["a"]({router:Ce,store:q,render:function(e){return e($)}}).$mount("#app")}});
//# sourceMappingURL=app.bbb910c2.js.map